<!-- Product Card (No Custom CSS) -->
<div class="card h-100 shadow-sm border-0 position-relative">
  <!-- Badges for product status -->
  <div class="position-absolute top-0 start-0 p-2 z-1">
    <!-- Dynamically add badges based on product properties -->
    ${product.isNewProduct ? `<span class="badge bg-success me-1">New</span>` :
    ''} ${product.isBestSeller ? `<span class="badge bg-danger me-1"
      >Best Seller</span
    >` : ''} ${product.onSale ? `<span class="badge bg-warning text-dark"
      >Sale</span
    >` : ''}
  </div>

  <!-- Product Image -->
  <a
    href="product-detail.html?slug=${product.slug}"
    class="text-decoration-none"
  >
    <img
      src="${imageUrl}"
      class="card-img-top p-3"
      alt="${product.name}"
      style="object-fit: contain; height: 200px"
    />
  </a>

  <!-- Product Information -->
  <div class="card-body d-flex flex-column">
    <!-- Product Title -->
    <h5
      class="card-title fw-bold"
      style="
        overflow: hidden;
        text-overflow: ellipsis;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        line-clamp: 2;
        -webkit-box-orient: vertical;
        max-height: 3rem;
      "
    >
      ${product.name}
    </h5>

    <!-- Rating -->
    <div class="mb-2 d-flex align-items-center">
      <div class="text-warning me-1">
        <!-- Star rating generated by function -->
        ${generateStarRating(product.averageRating)}
      </div>
      <small class="text-muted">(${product.reviewCount})</small>
    </div>

    <!-- Description -->
    <p
      class="card-text text-secondary small mb-3"
      style="
        overflow: hidden;
        text-overflow: ellipsis;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        line-clamp: 2;
        -webkit-box-orient: vertical;
        height: 2.5rem;
      "
    >
      ${product.shortDescription}
    </p>

    <!-- Price and Add to Cart -->
    <div class="d-flex justify-content-between align-items-center mt-auto">
      <div>
        <!-- Conditional price display -->
        ${variant.salePrice ? `<span
          class="text-decoration-line-through text-muted small me-1"
          >$${variant.price.toFixed(2)}</span
        >
        <span class="fw-bold text-danger">$${variant.salePrice.toFixed(2)}</span
        >` : `<span class="fw-bold">$${variant.price.toFixed(2)}</span>` }
      </div>
      <button
        class="btn btn-primary btn-sm rounded-3"
        data-product-variant-id="${variant._id}"
        data-product-name="${product.name}"
        data-product-price="${variant.salePrice || variant.price}"
      >
        <i class="bi bi-cart-plus me-1"></i>Add to Cart
      </button>
    </div>
  </div>
</div>

<!-- This JavaScript function would be available in your utils.js -->
<script>
  // Example function that might be used to generate stars
  function generateStarRating(rating) {
    const fullStars = Math.floor(rating);
    const halfStar = rating % 1 >= 0.5;
    const emptyStars = 5 - fullStars - (halfStar ? 1 : 0);

    let html = "";

    // Full stars
    for (let i = 0; i < fullStars; i++) {
      html += '<i class="bi bi-star-fill"></i>';
    }

    // Half star
    if (halfStar) {
      html += '<i class="bi bi-star-half"></i>';
    }

    // Empty stars
    for (let i = 0; i < emptyStars; i++) {
      html += '<i class="bi bi-star"></i>';
    }

    return html;
  }
</script>
